# 5.2 Linux文件权限的概念  
## 5.1 用户与用户组  
1)User  
2)Group  
3)Others  
4)默认情况下，所有系统上的账号和一般身份用户，还有root相关信息都记录在/etc/passwd文件内，个人密码则记录在/etc/shadow文件内。所有的组名都记录在/etc/group中。  
## 5.2 -rw-r--r-- 1 root root 1864 May 4 18:00 initial-setup-ks.cfg  
分别代表：文件类型权限，链接数，文件拥有者，文件所属用户组，文件大小（Bytes），文件最后被修改时间，文件名  
## 5.2.1 【-】【rw-】【r--】【r--】解析    
1）第一个字符代表这个文件是目录（d）、文件（-）、链接文件（|）、设备文件里的可供存储的周边设备（可按块随机读取的设备）（b）、设备文件里额串行端口设备键盘鼠标等（一次性读取设备）（c）。    
2）接下来的字符三个为一组，且都为rwx三个参数的组合，r可读，w可写，x可执行，三个参数位置是固定的。  
3）第一组为文件拥有者可具备的权限，第二组为加入此用户组的账号的权限，第三组为非本人且没有加入本用户组的其他账号的权限。  
## 5.2.2 修改文件属性及权限   
1）chgrp：修改文件所属用户组，文件必须在/etc/group文件中才能修改。（chgrp 组名 文件名）  
  $ chgrp [-R] dirname/filename  
  例：修改text.txt的组为users  
  $ chgrp users text.txt  
2）chown：修改文件拥有者，用户必须在/etc/passwd文件中才能修改。  
  $ chown [-R] 账号名称 文件或目录名称  
  $ chown [-R] 账号名称：用户组名称 文件或目录名称  
  例：修改text.txt的拥有者为bin账号  
  $ chown bin text.txt  
     修改text.txt的拥有者和用户组为root  
  $ chown root:root text.txt  
【注】什么时候要使用chown和chgrp？  
  例：复制文件:  
  $ cp 源文件 目标文件  
  假设要复制text.txt文件复制成text2.txt，且要给bin这个人  
  $ cp text.txt text.txt2  
  复制操作会复制执行者的属性和权限，所以需要更改文件的所属用户组（chgrp）和文件拥有者（chown）  
3）chmod：修改文件权限。（数字类型修改<r:4，w:2，x:1>和符号类型修改<u(user)g(group)o(other)a(all) +-= rwx>）  
  $ chmod [-R] rwx相加的数字 文件或目录  
  例如：text.txt的属性为【-rwxrwxrwx】即777，修改为640  
  $ chmod 777 text.txt  
  例如：设置文件text.txt的权限为【-rwxr-xr-x】时：  
  $ chmod u=rwx,go=r-x text.txt  
## 5.2.3 目录与文件权限的意义  
1.权限对文件的重要性  
1）r：可读取文件内容  
2）w:可以编辑、新增或修改文件内容，单不能删除  
3）x:该文件具有可以被系统执行的权限  
2.权限对目录的重要性  
1）r：表示具有读取目录结构列表的权限，即可以查询该目录下的文件名数据，例如：$ ls  
2）w：表示具有改动该目录结构列表的权限：  
     a建立新的文件或目录  
     b删除已存在的文件或目录  
     c将已存在的文件或目录更名  
     d移动该目录内的文件或目录的位置  
3）x：代表用户能否进入该目录成为工作目录  
例如：一个账号有对某目录有r的权限，但是没有x的权限，则该账号可以查询该目录的文件名列表，但不可以切换到该目录  
【注】如果你在某目录下不具有x的权限，那么你就无法切换到该目录，也无法执行目录下的任何命令，即使你具有r和w的权限。要开放目录给任何人浏览时，应该至少也要给予r和x的权限，但w权限不可随便给  
## 5.2.4 Linux文件种类与扩展名  
### 5.2.4.1 文件种类
1.常规文件（regular file）  
1）纯文本文件（ASCII）  
2）二进制文件(binary):例如可执行文件（cat）  
3）数据文件：例如/var/log/wtmp文件（使用cat查看会乱码，使用last查看）  
2.目录（directory）  
3.链接文件（link）：类似Windows下的快捷方式，以‘l’表示（lrwxrwxrwx）  
4.设备与设备文件：与系统周边及存储等相关的一些文件，通常都集中在/dev这个目录之下  
1）区块（block）设备文件（b）：一些存储数据，以提供系统随机存取的接口设备（例如硬盘和软盘），例如/dev下的sda文件  
2）字符（character）设备文件：一些串行端口的接口设备（例如鼠标、键盘等）  
5.数据接口文件（sockets）  
6.数据传送文件（FIFO,pipe）  
### 5.2.4.2 文件扩展名  
1.一个Linux文件是否能被执行，与它的第一个栏的十个属性有关，与文件名无关  
2.只要具有x的权限，即代表这个文件具有可被执行的能力，具有可执行的权限和具有可执行的程序代码不同。可以被执行与可执行成功不同  
1）*.sh:脚本或批处理文件  
2）*Z、*.tar、*.tar.gz、*.zip、*.tgz:经过打包的压缩文件  
3）*.html、*.php：网页相关文件
# 5.3 Liux目录配置  
## 5.3.1 Linux目录配置的依据——FHS  
1.依据——FHS（Filesystem Hierarchy Standard）
1）FHS的重点在于规范每个特定的目录下应该要放置什么样的数据。分为四种形态：

||可分享（shareable）|不可分享（unshareable）|  
|:--|:--|:--|  
|不变（static）|/usr(存放软件)|/etc(配置文件)|    
||/opt(第三方辅助软件)|/boot(启动与内核文件)|  
|可变动（variable）|/var/mail(用户邮箱)|/var/run(程序相关)|  
||/var/spool/news(新闻组)|/var/lock(程序相关)|  

2）可分享：可分享给其他系统挂载使用的目录，所以包括执行文件与用户的邮件等数据，是能分享给网络上其他主机挂载的目录。  
3）不可分享：自己机器上边运行的设备文件或是与程序有关的socket文件等，由于仅与自身机器有关，所以不适合分享。  
4）不变：有些数据不会变动，跟随着发行版而不变动，例如函数库、文件说明、系统管理员所管理的主机服务配置文件等。  
5）可变动：经常修改的数据，例如日志文件，一般用户可自行接收的新闻组等。  
## 5.3.1.2  
1.根目录（/）的意义与内容：FHS建议根目录所在分区越小越好，且应用程序所安装的软件最好不要与根目录放在同一个分区，保持根目录越小越好。  
2.FHS要求根目录下必须要存在的目录：(各目录说明见Page166)  
/bin  存放必要命令   
/boot  
/dev  存放设备文件  
/etc  存放系统配置文件  
/lib  存放必要的运行库  
/media  
/mnt  存放临时的映射文件系统，通常用来挂载使用   
/opt  
/run  
/sbin  存放系统管理程序  
/srv  
/tmp  存放临时文件  
/usr  存放app，命令程序、程序库、手册和其他文档  
/var  系统默认日志存放目录  
3.FHS建议可以存在的目录：  
/home  普通用户的宿主目录，用户数据存放在其主目录中   
/lib<qual>  
/root  超级用户目录  
4.其他几个重要的目录:  
/lost+found  
/proc  存放存储进程和系统信息  
/sys  
5./usr的意义与内容：  
1）usr缩写为UNIX Software Resource，即UNIX操作系统软件资源所放置的目录。  
2）FHS要求/usr下必须要存在的目录：  
/usr/bin/  
/usr/lib/  
/usr/local/  
/usr/sbin/  
/usr/share/  
3)FHS建议可存在的目录：  
/usr/games/  
/usr/include/  
/usr/libexec/  
/usr/lib<qual>/  
/usr/src/  
6./var的意义与内容：  
1）/var:是在系统运行后会渐渐占用硬盘容量的目录，主要针对经常性变动的文件，包括缓存（cache）、日志文件（log file）以及某些软件运行所产生的文件，包括程序文件（lock file、run file），或例如MySQL数据库的文件等。  
2）FHS要求必须存在的目录：  
/var/cache/  
/var/lib/  
/var/lock/  
/var/log/  
/var/mail/  
/var/run/  
/var/spool/   
## 5.3.3 绝对路径和相对路径  
1.绝对路径：由根目录（/）开始写起的文件名或目录名称，例：/home/likejia  
2.相对路径：相对于目前路径的文件名写法，开始不是/即为相对路径，例：./home/likejia或../home/li.kejia  


  
  
  
  
  
  
  
  
  
  
  
  
  
  
  


